# Denoばた会議 Monthly 第16回
2023年2月3日開催。  
[connpassリンク](https://deno-ja.connpass.com/event/270086/)。

## 今月のアップデートを追う
Denoのアップデートを追っていくLT。  
そのあとの雑談込みでザックリと箇条書き。

[@uki00aさんのスライド](https://uki00a.github.io/slides/denobata-2023-02-03)

### Deno v1.30
#### `node:`URLのサポート
- `node:events`などNode.jsの組み込みパッケージを`import`できる

#### `deno.json(c)`でのImport Mapsの定義がサポート
- `deno.json(c)`の内容を元に、bare specifierを解釈してくれる

#### deno fmtでセミコロンの有無を制御できるように
- `deno.json`の`fmt.options.semiColons`オプションで`deno fmt`のセミコロンの有無を変更できる

#### Deno.permissionsに同期バージョンのAPIが追加
- `Deno.permissions`名前空間に`querySync()`/`requestSync()`/`revokeSync()`が追加された

### Deno v1.29
#### `Deno.spawn`/`Deno.spawnSync`/`Deno.spawnChild`の削除
- 今後は`Deno.Command`の使用を推奨

#### `deno.json(c)`でのロックファイルの挙動の制御
- `lock`プロパティが追加
- `false`で無効化
- ファイル名のカスタマイズは`lock`プロパティに`./lock.json`などを渡すことで動作

#### `deno check`コマンドで`--all`オプションがサポート
- `deno check --all mod.ts`でリモートモジュールも含む全ファイルの型チェックが有効化される
- `deno check --remote`でも同様の振る舞いを実現できるが、今後は上記の`--all`を指定した形式が推奨

### Denoのロードマップ (2023年 Q1)
#### `deno:`URLのサポート
- `deno:dax@0.24.0`と記載することで`https://deno.land/x/dax@0.24.0/mod.ts`が`import`される

#### `package.json`のサポート
- `package.json`の`dependencies`を元にbare specifierを解釈してくれる
- `package.json`の`scripts`を`deno task`で実行できる

#### その他の計画
- `node:`URLのサポート (v1.30.0でサポート)
- `deno.json(c)`でのImport mapsの定義 (v1.30.0でサポート)
- `deno bundle`コマンドの非推奨化

### [Big news in Deno Land](https://changelog.com/jsparty/256)
- npmパッケージのサポートを導入した背景や、Denoの将来などに関する話が行われている
- `ShadowRealm`などを活用したパッケージごとのパーミッション管理のサポートについて
- `--allow-write`を指定した際は、ファイルシステム全体ではなく、カレントディレクトリ配下への書き込みのみを許可すべきでは？
- Deno Deployにおける状態管理やCockroachDBやSpannerなどについて

## 質問や共有コーナー

## 参考資料
上記をまとめる際に眺め、かつ箇条書きの中に含められなかった資料です。  
名前だけ掠ってて関係ない資料もあるかと思いますが、まとめる作業の可視化として残しています。  
読まなくて大丈夫です。

- [jkrems/proposal-pkg-exports: Proposal for Bare Module Specifier Resolution in node.js](https://github.com/jkrems/proposal-pkg-exports)
- [Modules: ECMAScript modules | Node.js v19.5.0 Documentation](https://nodejs.org/api/esm.html#terminology)
- [esm resolver spec and implementation refinements by guybedford · Pull Request #12 · nodejs/ecmascript-modules](https://github.com/nodejs/ecmascript-modules/pull/12)
